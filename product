<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª - Ù…Ø§Ù‡Ø± ÙÙˆÙ†</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>.product-img { height: 230px; object-fit: contain; }</style>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-dark p-3">
    <div class="container d-flex justify-content-between">
        <a class="navbar-brand" href="index.html">ğŸ“± Ù…Ø§Ù‡Ø± ÙÙˆÙ†</a>
        <div>
            <button class="btn btn-outline-light me-2" onclick="location.href='admin.html'">ğŸ”§ Admin</button>
            <button class="btn btn-light" onclick="location.href='cart.html'">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</button>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h2 class="mb-3">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
    <div id="allProducts" class="row g-3"></div>
</div>

<script>
function getProducts() { let p = JSON.parse(localStorage.getItem('products')); return p && Array.isArray(p)?p:[]; }

function addToCart(productId) {
    let products = getProducts();
    let prod = products.find(p => p.id === productId);
    if (!prod) return alert("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.push({id: prod.id, name: prod.name, price: prod.price, img: prod.img});
    localStorage.setItem('cart', JSON.stringify(cart));
    alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©");
}

function renderAll() {
    let products = getProducts();
    let container = document.getElementById('allProducts');
    container.innerHTML = '';
    if (!products || products.length === 0) {
        container.innerHTML = '<div class="alert alert-info">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯. Ø§ÙØªØ­ Admin Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª.</div>';
        return;
    }
    products.forEach(prod => {
        container.innerHTML += `
            <div class="col-md-3">
                <div class="card p-2 shadow-sm">
                    <img src="${prod.img}" class="product-img mb-2" alt="${prod.name}">
                    <h5>${prod.name}</h5>
                    <p class="text-danger fw-bold">${prod.price.toLocaleString()} Ø¬Ù†ÙŠÙ‡</p>
                    <button class="btn btn-dark" onclick="addToCart('${prod.id}')">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                </div>
            </div>
        `;
    });
}
window.addEventListener('storage', renderAll);
renderAll();
</script>

</body>
</html>
